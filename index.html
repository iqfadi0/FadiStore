<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>رصيد وخدمة</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#0b0b0b;color:#fff}
.hidden{display:none}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#141414;border-radius:12px;padding:20px;margin-bottom:20px}
input,button{width:100%;padding:12px;margin-top:10px;border-radius:8px;border:none}
input{background:#222;color:#fff}
button{background:#3b82f6;color:#fff;font-weight:bold;cursor:pointer}
.pkg{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px}
.pkg-card{background:#1a1a1a;border-radius:12px;padding:15px}
.pkg-card h3{margin:0}
.admin{background:#7c2d12}
</style>
</head>
<body>

<div class="container">

<!-- LOGIN -->
<div id="login" class="card">
<h2>تسجيل الدخول</h2>
<input id="phone" placeholder="رقم الهاتف">
<input id="pass" placeholder="كلمة المرور">
<button onclick="login()">دخول</button>
<p style="color:#aaa">* الحسابات ينشئها الأدمن فقط</p>
</div>

<!-- USER -->
<div id="user" class="hidden">
<div class="card">
<h2>أهلاً <span id="uPhone"></span></h2>
<p>الرصيد الحالي: <b id="balance"></b> LBP</p>
</div>

<div class="pkg">
<div class="pkg-card">
<h3>5.5 GB</h3>
<p>550,000 LBP</p>
<input placeholder="رقم الهاتف" id="p1">
<button onclick="buy(550000,'p1')">اشتراك</button>
</div>

<div class="pkg-card">
<h3>11 GB</h3>
<p>720,000 LBP</p>
<input placeholder="رقم الهاتف" id="p2">
<button onclick="buy(720000,'p2')">اشتراك</button>
</div>

<div class="pkg-card">
<h3>22 GB</h3>
<p>1,070,000 LBP</p>
<input placeholder="رقم الهاتف" id="p3">
<button onclick="buy(1070000,'p3')">اشتراك</button>
</div>
</div>

<button style="margin-top:20px;background:#555" onclick="logout()">تسجيل خروج</button>
</div>

<!-- ADMIN -->
<div id="admin" class="hidden admin card">
<h2>لوحة الأدمن</h2>

<input id="newPhone" placeholder="رقم الزبون">
<input id="newPass" placeholder="كلمة المرور">
<button onclick="createUser()">إنشاء حساب</button>

<hr>

<input id="addPhone" placeholder="رقم الزبون">
<input id="amount" placeholder="المبلغ">
<button onclick="addBalance()">إضافة رصيد</button>

<button style="background:#000" onclick="logout()">خروج</button>
</div>

</div>

<script>
let users = JSON.parse(localStorage.getItem("users")||"{}");
let current = null;

// أدمن ثابت
users["admin"]={pass:"admin",balance:0,admin:true};
localStorage.setItem("users",JSON.stringify(users));

function login(){
let p=phone.value, pw=pass.value;
if(!users[p]||users[p].pass!==pw)return alert("خطأ");
current=p;
login.classList.add("hidden");
(users[p].admin?admin:user).classList.remove("hidden");
if(!users[p].admin){
uPhone.innerText=p;
balance.innerText=users[p].balance;
}
}

function logout(){location.reload()}

function createUser(){
let p=newPhone.value, pw=newPass.value;
users[p]={pass:pw,balance:0};
localStorage.setItem("users",JSON.stringify(users));
alert("تم إنشاء الحساب");
}

function addBalance(){
let p=addPhone.value, a=+amount.value;
if(!users[p])return alert("غير موجود");
users[p].balance+=a;
localStorage.setItem("users",JSON.stringify(users));
alert("تمت الإضافة");
}

function buy(price,inputId){
let phoneNum=document.getElementById(inputId).value;
if(users[current].balance<price)return alert("رصيد غير كافي");
users[current].balance-=price;
localStorage.setItem("users",JSON.stringify(users));
balance.innerText=users[current].balance;
alert("تم الطلب على الرقم: "+phoneNum+"\nفعّل الخدمة يدويًا");
}
</script>

</body>
</html>
